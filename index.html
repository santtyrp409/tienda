<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Tienda Online de Comidas</title>

<style>
body{
    font-family:Arial, sans-serif;
    margin:0;
    background:url("https://images.unsplash.com/photo-1550547660-d9450f859349") center/cover fixed;
}
body::before{
    content:"";
    position:fixed;
    inset:0;
    background:rgba(0,0,0,0.55);
    z-index:-1;
}
header{
    background:#e63946;
    color:white;
    padding:20px;
    text-align:center;
}
.horario{
    background:#333;
    color:white;
    text-align:center;
    padding:8px;
}
section{
    padding:20px;
    background:rgba(255,255,255,0.8);
    margin:15px;
    border-radius:10px;
}
.item,.pedido{
    background:rgba(255,255,255,0.75);
    padding:15px;
    margin-bottom:10px;
    border-radius:8px;
}
button{
    background:#e63946;
    color:white;
    border:none;
    padding:6px 10px;
    border-radius:5px;
    cursor:pointer;
}
button.quitar{
    background:#555;
    margin-left:5px;
}
input,textarea{
    width:100%;
    padding:8px;
    margin-bottom:10px;
}
.total{
    font-size:18px;
    font-weight:bold;
}
#final,#adminPanel{
    display:none;
}
</style>
</head>

<body>

<header>
<h1>üçî Mi Tienda de Comidas</h1>
<p>Pedidos online</p>
</header>

<div class="horario">üïí Horario: 19:00 a 23:30</div>

<section id="menu">
<h2>üìã Men√∫</h2>

<div class="item">
<h3>Cheeseburger</h3>
<p>$5</p>

<label><input type="checkbox" id="extraCarne"> Extra carne (+$2)</label><br>
<label><input type="checkbox" id="extraCheddar"> Cheddar (+$1)</label><br>
<label><input type="checkbox" id="extraPanceta"> Panceta (+$1.5)</label><br>
<label><input type="checkbox" id="extraCebolla"> Cebolla (+$0.5)</label><br>

<button onclick="agregarCheeseburger()">Agregar</button>
</div>

<div class="item">
<h3>Pizza</h3>
<p>$7</p>
<button onclick="agregar('Pizza',7)">Agregar</button>
</div>

<div class="item">
<h3>Papas Fritas</h3>
<p>$3</p>
<button onclick="agregar('Papas Fritas',3)">Agregar</button>
</div>
</section>

<section class="pedido">
<h2>üõí Tu Pedido</h2>
<ul id="listaPedido"></ul>
<p>Env√≠o: $<span id="envio">2</span></p>
<p class="total">Total Final: $<span id="total">0</span></p>
</section>

<section id="datos">
<h2>üìù Datos del Cliente</h2>
<input id="nombre" placeholder="Nombre y apellido">
<input id="direccion" placeholder="Direcci√≥n">
<textarea id="comentario" placeholder="Comentarios"></textarea>

<label><input type="radio" name="pago" value="Efectivo" checked> Efectivo</label>
<label><input type="radio" name="pago" value="Transferencia"> Transferencia</label>

<button onclick="confirmarPedido()">Confirmar pedido</button>
</section>

<div id="final">
<h2>üìå Pedido confirmado</h2>
<div id="resumen"></div>
<p><strong>Total:</strong> $<span id="totalFinal"></span></p>
<button id="btnPago" onclick="irMercadoPago()">Pagar Mercado Pago</button>
<button onclick="volver()">Volver</button>
</div>

<!-- ADMIN -->
<button onclick="abrirAdmin()" style="position:fixed;bottom:10px;right:10px;font-size:12px">ADMIN</button>

<section id="adminPanel">
<h3>üîê Admin</h3>
<input type="password" id="adminPass" placeholder="Contrase√±a">
<button onclick="loginAdmin()">Entrar</button>

<div id="adminContent" style="display:none">
<input id="adminWp" placeholder="WhatsApp">
<input id="adminMp" placeholder="Link Mercado Pago">
<input id="adminEnvio" type="number" placeholder="Env√≠o">
<button onclick="guardarConfig()">Guardar</button>

<h4>Pedidos</h4>
<ul id="adminPedidos"></ul>
<p>Total vendido: $<span id="adminTotal">0</span></p>
</div>
</section>

<script>
let pedido={};
let totalFinalGlobal=0;

let config=JSON.parse(localStorage.getItem("config"))||{
    whatsapp:"5491162911053",
    mp:"https://link.mercadopago.com.ar/frakev",
    envio:2
};

let pedidosAdmin=JSON.parse(localStorage.getItem("pedidosAdmin"))||[];

document.getElementById("envio").textContent=config.envio;

function agregar(nombre,precio){
    if(!pedido[nombre]) pedido[nombre]={precio,cantidad:1};
    else pedido[nombre].cantidad++;
    actualizarPedido();
}

function agregarCheeseburger(){
    let precio=5;
    let extras=[];
    if(extraCarne.checked){precio+=2;extras.push("Extra carne")}
    if(extraCheddar.checked){precio+=1;extras.push("Cheddar")}
    if(extraPanceta.checked){precio+=1.5;extras.push("Panceta")}
    if(extraCebolla.checked){precio+=0.5;extras.push("Cebolla")}
    let nombre="Cheeseburger"+(extras.length?" ("+extras.join(", ")+")":"");
    agregar(nombre,precio);
    extraCarne.checked=extraCheddar.checked=extraPanceta.checked=extraCebolla.checked=false;
}

function quitar(nombre){
    pedido[nombre].cantidad--;
    if(pedido[nombre].cantidad<=0) delete pedido[nombre];
    actualizarPedido();
}

function actualizarPedido(){
    let lista=listaPedido;
    lista.innerHTML="";
    let total=0;
    for(let p in pedido){
        let sub=pedido[p].precio*pedido[p].cantidad;
        total+=sub;
        lista.innerHTML+=`${p} x${pedido[p].cantidad} $${sub}
        <button class="quitar" onclick="quitar('${p}')">‚àí</button><br>`;
    }
    totalFinalGlobal=total+config.envio;
    document.getElementById("total").textContent=totalFinalGlobal;
}

function confirmarPedido(){
    let nombre=nombreInput.value;
    let pago=document.querySelector("input[name=pago]:checked").value;

    let texto="";
    for(let p in pedido){
        texto+=`${p} x${pedido[p].cantidad}\n`;
    }

    pedidosAdmin.push({cliente:nombre,total:totalFinalGlobal});
    localStorage.setItem("pedidosAdmin",JSON.stringify(pedidosAdmin));

    let msg=`PEDIDO\n${texto}\nTotal $${totalFinalGlobal}`;
    window.open(`https://wa.me/${config.whatsapp}?text=${encodeURIComponent(msg)}`);
}

function irMercadoPago(){
    navigator.clipboard.writeText(totalFinalGlobal);
    window.location.href=config.mp;
}

function volver(){location.reload();}

function abrirAdmin(){adminPanel.style.display="block";}
function loginAdmin(){
    if(adminPass.value==="1234"){
        adminContent.style.display="block";
        adminWp.value=config.whatsapp;
        adminMp.value=config.mp;
        adminEnvio.value=config.envio;
        renderAdmin();
    }
}
function guardarConfig(){
    config.whatsapp=adminWp.value;
    config.mp=adminMp.value;
    config.envio=Number(adminEnvio.value);
    localStorage.setItem("config",JSON.stringify(config));
    alert("Guardado");
}
function renderAdmin(){
    adminPedidos.innerHTML="";
    let t=0;
    pedidosAdmin.forEach(p=>{
        t+=p.total;
        adminPedidos.innerHTML+=`<li>${p.cliente} $${p.total}</li>`;
    });
    adminTotal.textContent=t;
}
</script>

</body>
</html>
