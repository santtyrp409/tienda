<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Hamburgueser√≠a</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">

<style>
*{box-sizing:border-box}
body{
margin:0;
font-family:Poppins,sans-serif;
background:url("https://images.unsplash.com/photo-1550547660-d9450f859349") center/cover fixed;
}
body::before{
content:"";
position:fixed;
inset:0;
background:rgba(0,0,0,.55);
z-index:-1;
}
header{background:#e63946;color:#fff;padding:15px;text-align:center}
nav{display:flex;justify-content:center;gap:30px;background:#111;padding:10px}
nav button{background:none;border:none;color:#fff;font-weight:600;cursor:pointer}
.container{max-width:800px;margin:auto;padding:12px}

.card{
background:rgba(255,255,255,.22);
backdrop-filter:blur(5px);
border-radius:16px;
padding:14px;
margin-bottom:14px;
}

.item{cursor:pointer}
.opciones{
display:none;
margin-top:10px;
border-top:1px dashed rgba(0,0,0,.3);
padding-top:10px;
}
.opciones.active{display:block}

.extra-row{
display:flex;
justify-content:space-between;
font-size:14px;
margin-bottom:6px;
}
.extra-row input{width:60px}

.quitar{
font-size:12px;
opacity:.75;
margin-top:8px;
}

button.accion{
width:100%;
margin-top:10px;
padding:10px;
border:none;
border-radius:12px;
background:#e63946;
color:#fff;
font-weight:600;
cursor:pointer;
}

input, textarea{
width:100%;
padding:8px;
margin-bottom:8px;
border-radius:8px;
border:none;
}

iframe{width:100%;height:220px;border-radius:12px;border:0}
ul{padding-left:18px}
small{opacity:.85}
</style>
</head>

<body>

<header>
<h1>üçî Hamburgueser√≠a</h1>
<p>Pedidos Online</p>
</header>

<nav>
<button onclick="mostrar('menu')">MEN√ö</button>
<button onclick="mostrar('info')">INFORMACI√ìN</button>
</nav>

<div class="container">

<!-- MENU -->
<section id="menu">

<!-- CHEESE -->
<div class="card item" onclick="toggle('cheese')">
<h3>Cheeseburger</h3>
<p>$5</p>
<small>2 carnes ¬∑ 4 cheddar</small>

<div id="cheese" class="opciones">
<div class="extra-row">Extra carne (+$2) <input type="number" min="0" value="0" data-p="2"></div>
<div class="extra-row">Extra cheddar (+$1) <input type="number" min="0" value="0" data-p="1"></div>

<div class="quitar">
Quitar (opcional):<br>
<label><input type="checkbox"> 1 carne</label><br>
<label><input type="checkbox"> 2 fetas cheddar</label>
</div>

<button class="accion" onclick="agregar(event,'Cheeseburger',5,'cheese')">Agregar</button>
</div>
</div>

<!-- MAGNIFICA -->
<div class="card item" onclick="toggle('magni')">
<h3>Magn√≠fica</h3>
<p>$6</p>
<small>2 carnes ¬∑ 2 cheddar ¬∑ lechuga ¬∑ tomate ¬∑ pickles ¬∑ cebolla ¬∑ ketchup</small>

<div id="magni" class="opciones">
<div class="extra-row">Extra carne (+$2) <input type="number" min="0" value="0" data-p="2"></div>
<div class="extra-row">Extra cheddar (+$1) <input type="number" min="0" value="0" data-p="1"></div>

<div class="quitar">
Quitar (opcional):<br>
<label><input type="checkbox"> cebolla</label><br>
<label><input type="checkbox"> pickles</label>
</div>

<button class="accion" onclick="agregar(event,'Magn√≠fica',6,'magni')">Agregar</button>
</div>
</div>

<!-- BACON -->
<div class="card item" onclick="toggle('bacon')">
<h3>Bacon</h3>
<p>$7</p>
<small>2 carnes ¬∑ 4 cheddar ¬∑ 2 pancetas</small>

<div id="bacon" class="opciones">
<div class="extra-row">Extra carne (+$2) <input type="number" min="0" value="0" data-p="2"></div>
<div class="extra-row">Extra panceta (+$1) <input type="number" min="0" value="0" data-p="1"></div>

<div class="quitar">
Quitar (opcional):<br>
<label><input type="checkbox"> 1 panceta</label><br>
<label><input type="checkbox"> 2 fetas cheddar</label>
</div>

<button class="accion" onclick="agregar(event,'Bacon',7,'bacon')">Agregar</button>
</div>
</div>

</section>

<!-- INFO -->
<section id="info" style="display:none" class="card">
<h3>Informaci√≥n</h3>
<p>üïí Horario: 19:00 a 23:30</p>
<p>üìç Env√≠os a domicilio</p>
</section>

<!-- PEDIDO -->
<section class="card">
<h3>üõí Tu Pedido</h3>
<ul id="lista"></ul>
<p>Env√≠o: $<span id="envio">0</span></p>
<p><strong>Total: $<span id="total">0</span></strong></p>
</section>

<!-- DATOS -->
<section class="card">
<h3>üìç Datos del cliente</h3>

<input id="nombre" placeholder="Nombre y Apellido">
<input id="direccion" placeholder="Direcci√≥n y altura" onblur="actualizarMapa()">
<input id="entre" placeholder="Entre calles">
<textarea id="descripcion" placeholder="Descripci√≥n de la casa"></textarea>

<button class="accion" onclick="usarUbicacion()">üìç Usar mi ubicaci√≥n</button>

<iframe id="mapa" src="https://www.google.com/maps?q=Buenos%20Aires&output=embed"></iframe>

<label><input type="radio" name="pago" value="Transferencia"> Transferencia</label><br>
<label><input type="radio" name="pago" value="Efectivo" checked> Efectivo</label>

<button class="accion" onclick="confirmar()">Enviar pedido por WhatsApp</button>
</section>

</div>

<script>
let pedido=[],totalFinal=0;
const localTienda={lat:-34.6037,lng:-58.3816};
let clienteLatLng=null;

function mostrar(id){
menu.style.display=id==="menu"?"block":"none";
info.style.display=id==="info"?"block":"none";
}

function toggle(id){
document.querySelectorAll('.opciones').forEach(o=>o.id!==id&&o.classList.remove('active'));
document.getElementById(id).classList.toggle('active');
}

function agregar(e,nombre,precio,id){
e.stopPropagation();
let box=document.getElementById(id);
let extras=0;
let detalle=[];

box.querySelectorAll('input[type=number]').forEach(i=>{
let cant=Number(i.value);
if(cant>0){
extras+=cant*Number(i.dataset.p);
detalle.push(`+${cant} extra`);
}
});

box.querySelectorAll('input[type=checkbox]').forEach(c=>{
if(c.checked) detalle.push(`sin ${c.parentNode.textContent.trim()}`);
});

pedido.push({
texto:`${nombre} (${detalle.join(", ")||"normal"})`,
precio:precio+extras
});
actualizar();
}

function actualizar(){
lista.innerHTML="";
let sum=0;
pedido.forEach((p,i)=>{
sum+=p.precio;
lista.innerHTML+=`<li>${p.texto} $${p.precio} <button onclick="pedido.splice(${i},1);actualizar()">x</button></li>`;
});
let envio=calcularEnvio();
envioSpan.textContent=envio;
totalFinal=sum+envio;
total.textContent=totalFinal;
}

function usarUbicacion(){
navigator.geolocation.getCurrentPosition(pos=>{
clienteLatLng={lat:pos.coords.latitude,lng:pos.coords.longitude};
mapa.src=`https://www.google.com/maps?q=${clienteLatLng.lat},${clienteLatLng.lng}&output=embed`;
actualizar();
});
}

function actualizarMapa(){
let q=encodeURIComponent(direccion.value+" "+entre.value);
mapa.src=`https://www.google.com/maps?q=${q}&output=embed`;
}

function distanciaKm(a,b){
const R=6371;
const dLat=(b.lat-a.lat)*Math.PI/180;
const dLng=(b.lng-a.lng)*Math.PI/180;
const x=Math.sin(dLat/2)**2+
Math.cos(a.lat*Math.PI/180)*Math.cos(b.lat*Math.PI/180)*
Math.sin(dLng/2)**2;
return 2*R*Math.atan2(Math.sqrt(x),Math.sqrt(1-x));
}

function calcularEnvio(){
if(!clienteLatLng) return 2;
let d=distanciaKm(localTienda,clienteLatLng);
if(d<=2) return 2;
if(d<=4) return 3;
return 4;
}

function confirmar(){
let pago=document.querySelector('input[name=pago]:checked').value;
let mapsLink=clienteLatLng
?`https://www.google.com/maps?q=${clienteLatLng.lat},${clienteLatLng.lng}`
:"";

let msg=`PEDIDO\n\nCliente: ${nombre.value}\n\n`;
pedido.forEach(p=>msg+=`‚Ä¢ ${p.texto}\n`);
msg+=`\nTotal: $${totalFinal}\nPago: ${pago}\n\nDirecci√≥n: ${direccion.value}\nEntre calles: ${entre.value}\n${descripcion.value}\n\nUbicaci√≥n: ${mapsLink}`;

window.open(`https://wa.me/549XXXXXXXXXX?text=${encodeURIComponent(msg)}`);
}
</script>

</body>
</html>
